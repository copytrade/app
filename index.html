<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Auto Copy Trade Binary.Com</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="blurBg-false" style="background-color:#091d1c">



<!-- Start Formoid form-->
<link rel="stylesheet" href="copytrade_files/formoid1/formoid-solid-light-green.css" type="text/css" />
<script type="text/javascript" src="copytrade_files/formoid1/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<form class="formoid-solid-light-green" style="background-color:#f4f9f8;font-size:14px;font-family:'Palatino Linotype','Book Antiqua',Palatino,serif;color:#34495E;max-width:480px;min-width:150px" method="post"><div class="title"><h2>Auto Copy Trade Binary.Com</h2></div>
	<div class="element-password"><label class="title"></label><div class="item-cont"><input class="large" id="token" value="RGLXsOsBs6wVavl" type="password" name="password" value="" placeholder="Token Master"/><span class="icon-place"></span></div></div>
	<div class="element-input"><label class="title"></label><div class="item-cont"><input class="large" id="leverage" type="text" name="input" placeholder="Leverage"/><span class="icon-place"></span></div></div>
	<div class="element-textarea"><label class="title"></label><div class="item-cont"><textarea class="medium" name="textarea" cols="20" rows="5" id="tokenCopyTrade" value="KasnsWbHuD7uBbB" placeholder="Token Copy Trade"></textarea><span class="icon-place"></span></div></div>
	<div class="element-textarea"><label class="title"></label><div class="item-cont"><textarea class="small" name="textarea1" cols="20" rows="5" id="result" placeholder="Monitoring Account"></textarea><span class="icon-place"></span></div></div>
	<div class="element-radio"><label class="title">Controller</label>		<div class="column column3"><label><input type="radio" name="radio" onclick="play()" value="Start Monitor" /><span>Start Monitor</span></label></div><span class="clearfix"></span>
		<div class="column column3"><label><input type="radio" name="radio" onclick="stop()" value="Stop Connect" /><span>Stop Connect</span></label></div><span class="clearfix"></span>
		<div class="column column3"><label><input type="radio" name="radio" id="reload" checked="" onclick="location.reload()" value="Restarting" /><span>Restarting</span></label></div><span class="clearfix"></span>
</div>
<div class="submit"><input type="submit" id="tokenResult" value="Account CR123456 USD 100 Server 00:00:00"/></div></form><p class="frmd"><a href="http://formoid.com/v29.php">jquery form validation</a> Formoid.com 2.9</p><script type="text/javascript" src="copytrade_files/formoid1/formoid-solid-light-green.js"></script>
<!-- Stop Formoid form-->
<script>
var value = function(a,b){return $('#'+a).val(b)}
var html = function(a,b){return $('#'+a).html(b)}
var stopTrade = false, a = 0,b = [],active = true, server = 0, c = 0,i = 0,ha = [],contract_id = [];
$(document).ready(function() {
$('#reload').prop('checked',true);
});
var stop = function(){
	stopTrade = true;
	ws.close();
}
var play = function(){
var stopTrade = false, a = 0,b = [],active = true, server = 0, c = 0,i = 0,ha = [],contract_id = [];
	  var urlws ='wss://ws.binaryws.com/websockets/v3?app_id=3260';
      ws = new WebSocket(urlws);
      ws.onopen = function() {
      	ws.send(JSON.stringify({authorize: document.getElementById('token').value}));
      	ws.send(JSON.stringify({ticks: 'R_100'}));
      	ws.send(JSON.stringify({ping: 1}));
      }
      ws.onclose = function(){
      	if(!stopTrade)
      	start();
      }
      ws.onerror = function(msg){
      	//console.log('error : '+msg);
      }
      ws.onmessage = function(msg){
      var data = JSON.parse(msg.data);
      //console.log(msg.data);
      if(data.authorize){
      	balance = Number(data.authorize.balance);
      	ws.send(JSON.stringify({balance: 1}));
      	c++;
      	b[c] = data.authorize.balance;
      //value('tokenResult','monitoring binary account '+data.authorize.loginid+' USD '+data.authorize.balance);
      }
      if(data.tick){
        a++;
	  	server = new Date(data.tick.epoch * 1e3).toISOString().slice(-13, -5);
        ha[a] = new Date().getTime();
        pin = Math.abs(ha[a] - ha[a - 1]) / 1000;
      }
      if(data.balance){
      	value('tokenResult','Account '+data.balance.loginid+' USD '+data.balance.balance+' Server '+server);
      	c++;
      	b[c] = data.balance.balance;
      	//console.log('balance '+b[c]);
      	if(b[c] != b[c - 1])
      	ws.send(JSON.stringify({portfolio: 1}));
        ws.send(JSON.stringify({balance: 1}));
      }
      if(data.portfolio){
        	i++;
        	contract_id[i] = data.portfolio.contracts[0].contract_id;
          if(contract_id[i] != contract_id[i - 1])
          	ws.send(JSON.stringify({proposal_open_contract: 1,contract_id: contract_id[i]}));
        }
      if(data.proposal_open_contract){
      	if(data.proposal_open_contract.validation_error == 'Waiting for entry tick.'){
      		ws.send(JSON.stringify({proposal_open_contract: 1,contract_id: contract_id[i]}));
      	}else{
      		if(active){active = false;
      	duration = data.proposal_open_contract.date_expiry - data.proposal_open_contract.date_start;
      	if(duration >= 60) {durasi = duration / 60; durasi_type = 'm';}
      	if(duration < 60) {durasi = duration; durasi_type = 's';}
      	if(duration == 10|| duration == 12 || duration == 14|| duration == 16|| duration == 18 || duration == 20){durasi = duration / 2;durasi_type = 't';}
    high_barrier = parseFloat(data.proposal_open_contract.high_barrier) - parseFloat(data.proposal_open_contract.entry_spot);
      	low_barrier = parseFloat(data.proposal_open_contract.low_barrier) - parseFloat(data.proposal_open_contract.entry_spot);
      	barrier =  parseFloat(data.proposal_open_contract.barrier) - parseFloat(data.proposal_open_contract.entry_spot);
      	if(barrier > 0) barrier = '+'+barrier;
      	if(data.proposal_open_contract.barrier_count == 2){
          ws.send(JSON.stringify({
              parameters: {
                amount: data.proposal_open_contract.buy_price * document.getElementById('leverage').value,
                basis: 'stake',
                contract_type: data.proposal_open_contract.contract_type,
                currency: data.proposal_open_contract.currency,
                barrier: '+'+high_barrier,
                barrier2: low_barrier,
                duration: durasi,
                duration_unit: durasi_type,
                symbol: data.proposal_open_contract.underlying
              },
              price: data.proposal_open_contract.buy_price * document.getElementById('leverage').value,
              buy_contract_for_multiple_accounts: '1',
              tokens: document.getElementById('tokenCopyTrade').value.split('\n')
          }));
         //value('myTextarea',msg.data);
      	}else{
      		if(durasi_type == 't')
          ws.send(JSON.stringify({
              parameters: {
                amount: data.proposal_open_contract.buy_price * document.getElementById('leverage').value,
                basis: 'stake',
                contract_type: data.proposal_open_contract.contract_type,
                currency: data.proposal_open_contract.currency,
                duration: durasi,
                duration_unit: durasi_type,
                symbol: data.proposal_open_contract.underlying
              },
              price: data.proposal_open_contract.buy_price * document.getElementById('leverage').value,
              buy_contract_for_multiple_accounts: '1',
              tokens: document.getElementById('tokenCopyTrade').value.split('\n')
          }));else
          ws.send(JSON.stringify({
              parameters: {
                amount: data.proposal_open_contract.buy_price * document.getElementById('leverage').value,
                basis: 'stake',
                contract_type: data.proposal_open_contract.contract_type,
                currency: data.proposal_open_contract.currency,
                barrier: barrier,
                duration: durasi,
                duration_unit: durasi_type,
                symbol: data.proposal_open_contract.underlying
              },
              price: data.proposal_open_contract.buy_price * document.getElementById('leverage').value,
              buy_contract_for_multiple_accounts: '1',
              tokens: document.getElementById('tokenCopyTrade').value.split('\n')
          }));
      	}
      	active = true;
      	html('result',data.proposal_open_contract.longcode);
        setTimeout(function(){html('result','Detection Contract');}, 10000);
      }/*else{
          html('result',data.proposal_open_contract.longcode);
          if(data.proposal_open_contract.validation_error == 'This contract has been sold.'){
          	active = true;
          	if(parseFloat(data.proposal_open_contract.bid_price) > 0){
          		html('result','This Contract Win !!');
          		setTimeout(function(){html('result','No Contract Active');}, 2000);
          	}
          	else {html('result','This Contract Loss !!');
          	   setTimeout(function(){html('result','No Contract Active');}, 2000);
          	}
          }else{
          setTimeout(function(){ws.send(JSON.stringify({proposal_open_contract: 1,contract_id: contract_id[i]}));}, 2000);
          }
      	}*/
      }
      }
      }
}

</script>


</body>
</html>
